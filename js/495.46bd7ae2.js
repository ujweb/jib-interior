"use strict";(self["webpackChunkjib_interior"]=self["webpackChunkjib_interior"]||[]).push([[495],{9495:function(e,a,t){t.r(a),t.d(a,{default:function(){return pe}});var s=t(6252),l=t(3577),i=t(9963);const r=e=>((0,s.dD)("data-v-734c417a"),e=e(),(0,s.Cn)(),e),d={class:"pt-50"},o={class:"container"},c={class:"mt-0"},n={class:"row"},m=(0,s.uE)('<div class="step-group col-md-6 offset-md-3 d-flex align-items-center justify-content-between mb-50" data-v-734c417a><div class="step-item text-secondary" data-v-734c417a><div class="fs-3" data-v-734c417a>STEP 1</div><h3 class="mb-0" data-v-734c417a>訂購資訊</h3></div><span class="material-icons-outlined" data-v-734c417a>arrow_right_alt</span><div class="step-item" data-v-734c417a><div class="fs-3" data-v-734c417a>STEP 2</div><h3 class="mb-0" data-v-734c417a>建立訂單</h3></div><span class="material-icons-outlined" data-v-734c417a>arrow_right_alt</span><div class="step-item" data-v-734c417a><div class="fs-3" data-v-734c417a>STEP 3</div><h3 class="mb-0" data-v-734c417a>完成訂單</h3></div></div>',1),u={key:0,class:"col-md-12 mb-20"},p=r((()=>(0,s._)("span",{class:"material-icons-outlined me-5"},"chevron_left",-1))),v=(0,s.Uk)(" 繼續購物 "),g={class:"col-12"},h={key:0,class:"row"},b={class:"col-md-6 mb-md-0 mb-50"},_=r((()=>(0,s._)("hr",{class:"bg-light my-0"},null,-1))),f={class:"cards cards-cart"},w=["src","alt"],y={class:"visually-hidden"},k={class:"card-body"},C={class:"card-text me-md-20"},$={class:"card-amount fs-4 mt-5"},x={class:"card-price fs-4 mt-md-0 mt-5 text-md-end"},U=["onClick"],V=r((()=>(0,s._)("hr",{class:"bg-light my-0"},null,-1))),W=r((()=>(0,s._)("label",{for:"coupon"},null,-1))),j=["readonly","placeholder"],D={key:0,class:"error fs-4 text-danger"},z=["disabled"],E={class:"row"},L={class:"col-md-8 offset-md-4"},S={class:"d-flex align-items-center justify-content-between mt-10"},q=r((()=>(0,s._)("div",{class:"fs-3"},"商品總計",-1))),T={class:"fs-2"},P={key:0,class:"d-flex align-items-center justify-content-between mt-10"},F=r((()=>(0,s._)("div",{class:"fs-3"},"優惠券折扣",-1))),N={class:"fs-3"},I={class:"d-flex align-items-center justify-content-between mt-10"},O=r((()=>(0,s._)("div",{class:"fs-3"},"訂單總計",-1))),B={class:"fs-2"},H={class:"col-md-6 px-md-20 px-0"},K={class:"p-30 bg-bright-gray bg-opacity-25"},M=r((()=>(0,s._)("h2",{class:"mb-20"},"填寫訂購資訊",-1))),R={class:"mb-20"},Y=r((()=>(0,s._)("label",{for:"email",class:"form-label mb-10"},[(0,s._)("span",{class:"text-danger"},"*"),(0,s.Uk)(" Email ")],-1))),Z={class:"mb-20"},A=r((()=>(0,s._)("label",{for:"name",class:"form-label mb-10"},[(0,s._)("span",{class:"text-danger"},"*"),(0,s.Uk)(" 收件人姓名 ")],-1))),G={class:"mb-20"},J=r((()=>(0,s._)("label",{for:"tel",class:"form-label mb-10"},[(0,s._)("span",{class:"text-danger"},"*"),(0,s.Uk)(" 聯絡電話 ")],-1))),Q={class:"mb-20"},X=r((()=>(0,s._)("label",{for:"address",class:"form-label mb-10"},[(0,s._)("span",{class:"text-danger"},"*"),(0,s.Uk)(" 收件地址 ")],-1))),ee={class:"mb-40"},ae=r((()=>(0,s._)("label",{for:"ask",class:"form-label mb-10"},"備註",-1))),te=r((()=>(0,s._)("button",{type:"submit",class:"btn btn-lg btn-primary fs-3 w-100"}," 送出訂單 ",-1))),se={key:1,class:"row"},le={class:"col-md-12 mb-md-0 mb-50"},ie={class:"d-flex flex-column align-items-center justify-content-between py-40"},re=(0,s.Uk)(" 購物車內沒有商品 "),de=r((()=>(0,s._)("span",{class:"material-icons-outlined me-5"},"chevron_left",-1))),oe=(0,s.Uk)(" 繼續購物 ");function ce(e,a,t,r,ce,ne){const me=(0,s.up)("RouterLink"),ue=(0,s.up)("FieldInput"),pe=(0,s.up)("ErrorMessage"),ve=(0,s.up)("FormBlock");return(0,s.wg)(),(0,s.iD)("section",d,[(0,s._)("div",o,[(0,s._)("article",c,[(0,s._)("div",n,[m,0!==ne.provideCart.data.length?((0,s.wg)(),(0,s.iD)("div",u,[(0,s.Wm)(me,{to:"/products?category=all",class:"link-black d-inline-flex align-items-center"},{default:(0,s.w5)((()=>[p,v])),_:1})])):(0,s.kq)("",!0),(0,s._)("div",g,[ne.provideCart.data.length>0?((0,s.wg)(),(0,s.iD)("div",h,[(0,s._)("div",b,[_,(0,s._)("div",f,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(ne.provideCart.data,(e=>((0,s.wg)(),(0,s.iD)("div",{class:"card card-horizontal",key:e.product_id},[(0,s.Wm)(me,{to:`/product/${e.product_id}`,class:"card-img me-10"},{default:(0,s.w5)((()=>[(0,s._)("img",{src:`${e.product.imageUrl}`,class:"img-fluid",alt:`${e.product.title} 主圖`},null,8,w),(0,s._)("span",y,(0,l.zw)(e.product.title),1)])),_:2},1032,["to"]),(0,s._)("div",k,[(0,s._)("div",C,[(0,s.Wm)(me,{to:`/products?category=${e.product.category}`,class:"d-block card-label fs-4 link-secondary"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.product.category),1)])),_:2},1032,["to"]),(0,s.Wm)(me,{to:`/product/${e.product_id}`,class:"d-block card-title fs-3 fw-bold"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.product.title),1)])),_:2},1032,["to"]),(0,s._)("div",$," 數量："+(0,l.zw)(e.qty),1)]),(0,s._)("div",x," NT$"+(0,l.zw)(e.final_total.toLocaleString()),1),(0,s._)("button",{type:"button",class:"btn btn-sm btn-outline-primary ms-10",onClick:a=>ne.removeCart("delete",e.id)}," 刪除 ",8,U)])])))),128))]),V,(0,s._)("div",{class:(0,l.C_)(["input-group mt-40 mb-30",{"pb-10":ce.error.length>0}])},[W,(0,s.wy)((0,s._)("input",{id:"coupon",type:"text",class:"form-control form-control-lg fs-3 bg-white",readonly:ne.provideCart.total!==ne.provideCart.final_total,placeholder:ne.provideCart.total!==ne.provideCart.final_total?"您已套用優惠券":"套用優惠券","onUpdate:modelValue":a[0]||(a[0]=e=>ce.code=e)},null,8,j),[[i.nr,ce.code]]),ce.error.length>0?((0,s.wg)(),(0,s.iD)("div",D,(0,l.zw)(ce.error),1)):(0,s.kq)("",!0),(0,s._)("button",{class:"btn btn-lg btn-primary fs-3",type:"button",disabled:ne.provideCart.total!==ne.provideCart.final_total||!ce.code,onClick:a[1]||(a[1]=(...e)=>ne.useCoupon&&ne.useCoupon(...e))}," 套用優惠券 ",8,z)],2),(0,s._)("div",E,[(0,s._)("div",L,[(0,s._)("div",S,[q,(0,s._)("h3",T," NT$ "+(0,l.zw)(ne.provideCart.total.toLocaleString()),1)]),ne.provideCart.total!==ne.provideCart.final_total?((0,s.wg)(),(0,s.iD)("div",P,[F,(0,s._)("div",N," − NT$ "+(0,l.zw)(ne.provideCart.total-ne.provideCart.final_total),1)])):(0,s.kq)("",!0),(0,s._)("div",I,[O,(0,s._)("h3",B," NT$ "+(0,l.zw)(ne.provideCart.final_total.toLocaleString()),1)])])])]),(0,s._)("div",H,[(0,s._)("div",K,[M,(0,s.Wm)(ve,{ref:"order",onSubmit:ne.sendOrder},{default:(0,s.w5)((({errors:e})=>[(0,s._)("div",R,[Y,(0,s.Wm)(ue,{type:"email",id:"email",name:"Email",class:(0,l.C_)(["form-control",{"is-invalid":e["Email"]}]),placeholder:"請輸入 Email",rules:"email|required",inputmode:"email",modelValue:ce.user.email,"onUpdate:modelValue":a[2]||(a[2]=e=>ce.user.email=e)},null,8,["class","modelValue"]),(0,s.Wm)(pe,{name:"Email",class:"invalid-feedback"})]),(0,s._)("div",Z,[A,(0,s.Wm)(ue,{type:"name",id:"name",name:"姓名",class:(0,l.C_)(["form-control",{"is-invalid":e["姓名"]}]),placeholder:"請輸入收件人姓名",rules:"required",modelValue:ce.user.name,"onUpdate:modelValue":a[3]||(a[3]=e=>ce.user.name=e)},null,8,["class","modelValue"]),(0,s.Wm)(pe,{name:"姓名",class:"invalid-feedback"})]),(0,s._)("div",G,[J,(0,s.Wm)(ue,{type:"tel",id:"tel",name:"電話",class:(0,l.C_)(["form-control",{"is-invalid":e["電話"]}]),placeholder:"請輸入聯絡電話",rules:ne.isPhone,inputmode:"tel",modelValue:ce.user.tel,"onUpdate:modelValue":a[4]||(a[4]=e=>ce.user.tel=e)},null,8,["class","rules","modelValue"]),(0,s.Wm)(pe,{name:"電話",class:"invalid-feedback"})]),(0,s._)("div",Q,[X,(0,s.Wm)(ue,{type:"text",id:"address",name:"地址",class:(0,l.C_)(["form-control",{"is-invalid":e["地址"]}]),placeholder:"請輸入收件地址",rules:"required",modelValue:ce.user.address,"onUpdate:modelValue":a[5]||(a[5]=e=>ce.user.address=e)},null,8,["class","modelValue"]),(0,s.Wm)(pe,{name:"地址",class:"invalid-feedback"})]),(0,s._)("div",ee,[ae,(0,s.wy)((0,s._)("textarea",{class:"form-control",id:"ask",rows:"3","onUpdate:modelValue":a[6]||(a[6]=e=>ce.message=e),placeholder:"請輸入備註"},null,512),[[i.nr,ce.message]])]),te])),_:1},8,["onSubmit"])])])])):((0,s.wg)(),(0,s.iD)("div",se,[(0,s._)("div",le,[(0,s._)("div",ie,[re,(0,s.Wm)(me,{to:"/products?category=all",class:"btn btn-primary d-inline-flex align-items-center mt-20"},{default:(0,s.w5)((()=>[de,oe])),_:1})])])]))])])])])])}var ne={data(){return{user:{email:"",name:"",tel:"",address:""},message:"",code:"",hasDiscount:!1,error:"",carts:[]}},emits:["page-loading","get-cart"],inject:["provideCart"],mounted(){this.$emit("get-cart"),this.$emitter.emit("page-loading",!1),document.body.classList.add("index-page"),document.body.classList.remove("index-page"),document.body.classList.remove("opened-nav"),document.body.classList.add("inner-page")},methods:{removeCart(e,a){this.$emitter.emit("page-loading",!0);let t=null;"clear"===e?t="https://vue3-course-api.hexschool.io/v2/api/ujhwang/carts":"delete"===e&&(t=`https://vue3-course-api.hexschool.io/v2/api/ujhwang/cart/${a}`),this.$http.delete(t).then((()=>{this.$emitter.emit("page-loading",!1),this.$emitter.emit("get-cart")})).catch((()=>{}))},isPhone(e){const a=/^(09)[0-9]{8}$/;return!!a.test(e)||"請輸入正確的手機號碼"},useCoupon(){this.$emitter.emit("page-loading",!0);const e={code:this.code},a="https://vue3-course-api.hexschool.io/v2/api/ujhwang/coupon";this.$http.post(a,{data:e}).then((()=>{this.$emitter.emit("page-loading",!1),this.$emitter.emit("get-cart"),this.hasDiscount=!0})).catch((e=>{this.error=e.response.data.message,this.$emitter.emit("page-loading",!1)}))},clearForm(){this.user={email:"",name:"",tel:"",address:""}},sendOrder(){this.$emitter.emit("page-loading",!0);const e="https://vue3-course-api.hexschool.io/v2/api/ujhwang/order";this.$http.post(e,{data:{user:this.user,message:this.message}}).then((e=>{this.$emitter.emit("get-cart"),this.clearForm(),this.$router.push(`/bill/${e.data.orderId}`),this.$emitter.emit("page-loading",!1)})).catch((()=>{this.$emitter.emit("page-loading",!1)}))}}},me=t(3744);const ue=(0,me.Z)(ne,[["render",ce],["__scopeId","data-v-734c417a"]]);var pe=ue}}]);
//# sourceMappingURL=495.46bd7ae2.js.map