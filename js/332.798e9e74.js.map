{"version":3,"file":"js/332.798e9e74.js","mappings":"qMASSA,MAAM,a,GACTC,EAAAA,EAAAA,GAA4E,QAAtED,MAAM,kBAAiB,4CAAwC,G,GAC/DA,MAAM,kB,WAAiB,kB,WAAsC,Q,0MAVvEE,EAAAA,EAAAA,IAAeC,IACfD,EAAAA,EAAAA,IAAsDE,EAAA,CAAnCC,gBAAiBC,EAAAA,gBAAc,6BAClDL,EAAAA,EAAAA,GAIO,cAHLC,EAAAA,EAAAA,IAEEK,EAAA,CADCC,UAAUF,EAAAA,SAAO,yBAGtBL,EAAAA,EAAAA,GAKS,gBAJPA,EAAAA,EAAAA,GAGM,MAHN,EAGM,CAFJQ,GACAR,EAAAA,EAAAA,GAA2F,OAA3F,EAA2F,IAAhDC,EAAAA,EAAAA,IAAyCQ,EAAA,CAA7BC,GAAG,UAAQ,C,kBAAC,IAAI,M,aAG3ET,EAAAA,EAAAA,IAKeU,EAAA,MAJFC,OAAK,SAAC,IAAiB,mBAAdC,EAAAA,MAAMD,OAAK,MACpBE,SAAO,SAChB,IAAmB,mBAAhBD,EAAAA,MAAME,SAAO,M,OAHpB,I,wBAYF,GACEC,OACE,MAAO,CACLC,KAAM,CACJD,KAAM,GACNE,YAAa,EACbC,MAAO,GAETC,MAAO,CACLR,MAAO,GACPS,KAAM,GACNN,QAAS,MAIfO,MAAO,CAAC,mBACRC,WAAY,CACVC,aAAAA,EAAAA,GAEFC,UACE,MAAO,CACLC,YAAaC,KAAKV,OAGtBW,UACED,KAAKE,UACLF,KAAKG,SAASC,GAAG,YAAaC,IAC5B,MAAM,KAAEC,EAAF,IAAQC,GAAQF,EACtBL,KAAKQ,QAAQF,EAAMC,MAErBP,KAAKG,SAASC,GAAG,YAAY,KAC3BJ,KAAKE,cAGTO,QAAS,CACPC,iBACEC,SAASC,KAAKC,UAAUC,OAAO,eAEjCC,mBACEf,KAAKG,SAASa,KAAK,gBAAgB,GACnChB,KAAKiB,SAAUA,EAAAA,EAAAA,IAAQ,gBACvBjB,KAAKiB,QAAQC,QAEfhB,UACE,MAAMiB,EAAc,2DACpBnB,KAAKoB,MAAMC,IAAIF,GACZG,MAAMC,IACLvB,KAAKV,KAAKD,KAAOkC,EAASlC,KAAKA,KAAKmC,MACpCxB,KAAKV,KAAKC,YAAc,EACxBS,KAAKV,KAAKE,MAAQ,EAClBQ,KAAKV,KAAKD,KAAKoC,SAASC,IACtB1B,KAAKV,KAAKC,aAAemC,EAAQnC,YACjCS,KAAKV,KAAKE,OAASkC,EAAQlC,aAInCmC,UAAUrB,GACRN,KAAKG,SAASa,KAAK,WAAY,CAAEV,KAAAA,EAAMC,IAAKD,EAAKC,OAEnDC,QAAQF,EAAMC,EAAM,GAClB,MAAMqB,EAAW,2DACXvC,EAAO,CACXA,KAAM,CACJwC,WAAYvB,EAAKwB,GACjBvB,IAAAA,IAIJP,KAAKoB,MAAMW,KAAKH,EAASvC,GACtBiC,MAAMC,IAELvB,KAAKP,MAAMR,MAAQsC,EAASlC,KAAK2C,QACjChC,KAAKP,MAAML,QAAW,KAAImC,EAASlC,KAAKA,KAAK4C,QAAQhD,aACrDe,KAAKE,UACLF,KAAKe,mBACLf,KAAKG,SAASa,KAAK,gBAAgB,MAEpCkB,OAAM,SAGNC,SAAQ,KACPnC,KAAKG,SAASa,KAAK,gBAAgB,QAI3CoB,YACEpC,KAAKG,SAASkC,IAAI,YAClBrC,KAAKG,SAASkC,IAAI,gBAClBrC,KAAKG,SAASkC,IAAI,c,UC7GtB,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE","sources":["webpack://jib-interior/./src/views/Front/IndexView.vue","webpack://jib-interior/./src/views/Front/IndexView.vue?f1dc"],"sourcesContent":["<template>\n  <PageLoading />\n  <header-component @emit-toggle-nav=\"openNavigation\" />\n  <main>\n    <RouterView\n      @get-cart=\"getCart\"\n    />\n  </main>\n  <footer>\n    <div class=\"container\">\n      <span class=\"d-inline-block\">jib interior © 2022 All Rights Reserved.</span>\n      <span class=\"d-inline-block\">圖片為練習使用，無商業用途｜<RouterLink to=\"/login\">登入後台</RouterLink></span>\n    </div>\n  </footer>\n  <SuccessModal>\n    <template #title>{{ modal.title }}</template>\n    <template #default>\n      {{ modal.content }}\n    </template>\n  </SuccessModal>\n</template>\n\n<script>\nimport { bsModal } from '@/script/bootstrap';\nimport SuccessModal from '@/components/AdminSuccessModal.vue';\n\nexport default {\n  data() {\n    return {\n      cart: {\n        data: [],\n        final_total: 0,\n        total: 0,\n      },\n      modal: {\n        title: '',\n        temp: {},\n        content: '',\n      },\n    };\n  },\n  emits: ['emit-toggle-nav'],\n  components: {\n    SuccessModal,\n  },\n  provide() {\n    return {\n      provideCart: this.cart,\n    };\n  },\n  mounted() {\n    this.getCart();\n    this.$emitter.on('add-cart', (res) => {\n      const { item, qty } = res;\n      this.addCart(item, qty);\n    });\n    this.$emitter.on('get-cart', () => {\n      this.getCart();\n    });\n  },\n  methods: {\n    openNavigation() {\n      document.body.classList.toggle('opened-nav');\n    },\n    openSuccessModal() {\n      this.$emitter.emit('page-loading', false);\n      this.bsModal = bsModal('SuccessModal');\n      this.bsModal.show();\n    },\n    getCart() {\n      const getCartApi = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`;\n      this.$http.get(getCartApi)\n        .then((response) => {\n          this.cart.data = response.data.data.carts;\n          this.cart.final_total = 0;\n          this.cart.total = 0;\n          this.cart.data.forEach((element) => {\n            this.cart.final_total += element.final_total;\n            this.cart.total += element.total;\n          });\n        });\n    },\n    addToCart(item) {\n      this.$emitter.emit('add-cart', { item, qty: item.qty });\n    },\n    addCart(item, qty = 1) {\n      const cartUrl = `${process.env.VUE_APP_API}/api/${process.env.VUE_APP_PATH}/cart`;\n      const data = {\n        data: {\n          product_id: item.id,\n          qty,\n        },\n      };\n      // console.log(cartUrl, data);\n      this.$http.post(cartUrl, data)\n        .then((response) => {\n          // console.log(response);\n          this.modal.title = response.data.message;\n          this.modal.content = `已將${response.data.data.product.title}加入購物車`;\n          this.getCart();\n          this.openSuccessModal();\n          this.$emitter.emit('page-loading', false);\n        })\n        .catch(() => {\n          // console.log(error);\n        })\n        .finally(() => {\n          this.$emitter.emit('page-loading', false);\n        });\n    },\n  },\n  unmounted() {\n    this.$emitter.off('add-cart');\n    this.$emitter.off('sending-sate');\n    this.$emitter.off('get-cart');\n  },\n};\n</script>\n","import { render } from \"./IndexView.vue?vue&type=template&id=28220c54\"\nimport script from \"./IndexView.vue?vue&type=script&lang=js\"\nexport * from \"./IndexView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"/Users/huangyuting/Documents/GitHub/jib-interior/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createVNode","_component_PageLoading","_component_header_component","onEmitToggleNav","$options","_component_RouterView","onGetCart","_hoisted_2","_component_RouterLink","to","_component_SuccessModal","title","$data","default","content","data","cart","final_total","total","modal","temp","emits","components","SuccessModal","provide","provideCart","this","mounted","getCart","$emitter","on","res","item","qty","addCart","methods","openNavigation","document","body","classList","toggle","openSuccessModal","emit","bsModal","show","getCartApi","$http","get","then","response","carts","forEach","element","addToCart","cartUrl","product_id","id","post","message","product","catch","finally","unmounted","off","__exports__","render"],"sourceRoot":""}